"use strict";angular.module("game",["templates","game.factories.tile","game.directives.tile"]).constant("MAP_HEIGHT",20).constant("MAP_WIDTH",20).controller("GameCtrl",["Tile","MAP_HEIGHT","MAP_WIDTH",function(t,e,n){var i=this;i.tileIndex=0,i.tiles=[],i.createMap=function(){for(var o=0;e>o;o++)for(var a=0;n>a;a++){var l=new t(i,{x:o,y:a,z:0},{type:"grass"});l.index=i.tileIndex++,i.tiles.push(l)}},i.findTileByPosition=function(t){var e=null;return angular.forEach(i.tiles,function(n){n.position.x===t.x&&n.position.y===t.y&&n.position.z===t.z&&(e=n)}),e},i.addTile=function(e,n){console.log(arguments);var o=new t(i,e,n);return i.tiles.push(o),o},i.createMap(),console.log(i.findTileByPosition({x:1,y:2,z:0}))}]),function(t){try{t=angular.module("templates")}catch(e){t=angular.module("templates",[])}t.run(["$templateCache",function(t){t.put("common/directives/tile/tile.html",'<div id="{{ tile.data.id }}"\n     style="z-index: {{ tile.data.translated.z }}; left: {{ tile.data.translated.y }}px; top: {{ tile.data.translated.x }}px;"\n     class="tile {{ tile.data.type }}">\n  <div ng-click="tile.onClick($event)"\n       ng-mouseover="tile.onMouseover($event)"\n       ng-mouseout="tile.onMouseout($event)"\n       class="face top"></div>\n  <div ng-click="tile.onClick($event)"\n       ng-mouseover="tile.onMouseover($event)"\n       ng-mouseout="tile.onMouseout($event)"\n       class="face left thin_face"></div>\n  <div ng-click="tile.onClick($event)"\n       ng-mouseover="tile.onMouseover($event)"\n       ng-mouseout="tile.onMouseout($event)"\n       class="face right thin_face"></div>\n</div>')}])}(),angular.module("game.directives.tile",[]).controller("TileCtrl",function(){var t=this;t.onClick=function(e){return e.shiftKey?(t.data.remove(),!1):void 0},t.onMouseover=function(){var e={x:t.element.hasClass("left")?t.data.position.x-1:t.data.position.x,y:t.element.hasClass("right")?t.data.position.y+1:t.data.position.y,z:t.element.hasClass("top")?t.data.position.z+1:t.data.position.z};t.data.game.guide=t.data.game.addTile(e,{type:"guide"})},t.onMouseout=function(){t.data.game.guide}}).directive("tile",function(){return{restrict:"E",controller:"TileCtrl as tile",templateUrl:"common/directives/tile/tile.html",scope:{ngModel:"="},link:function(t,e,n,i){i.element=e,i.data=t.ngModel}}}),angular.module("game.factories.tile",[]).constant("TILE_WIDTH",45).constant("TILE_HEIGHT",26).constant("Z_LEVEL_ADJUSTMENT",2e3).constant("Z_ROW_ADJUSTMENT",100).constant("Z_OFFSET",22).factory("Tile",["TILE_WIDTH","TILE_HEIGHT","Z_LEVEL_ADJUSTMENT","Z_ROW_ADJUSTMENT","Z_OFFSET",function(t,e,n,i,o){return function(a,l,s){var r=this;r.game=a,r.translated={x:0,y:0,z:0},r.position={x:0,y:0,z:0},r.type=s.type,r.setPosition=function(a){r.position={x:a.x||r.position.x,y:a.y||r.position.y,z:a.z||r.position.z},r.translated={x:e*a.x*-1+a.y*e-a.z*o,y:t*a.x+a.y*t,z:a.z*n+a.y*i-a.x}},r.remove=function(){r.type="air",console.log(r.type)},r.setPosition(l)}}]);